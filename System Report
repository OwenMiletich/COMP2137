#!/bin/bash      
#Made by: Owen Reed Miletich
#Student Number: 200524225

#These are the varibles I'm using for the body of my script.

todaydate=$(date +%F)
todaytime=$(date +%r)
hostname=$(hostname)
distronameandversion=$(grep "^PRETTY_NAME" /etc/os-release | cut -d= -f2 | tr -d '"')
uptime=$(uptime)

#Above are the Varibles for System Information.

cpumakeandmodel=$(grep -m 1 'model name' /proc/cpuinfo | cut -d: -f2 | cut -d@ -f1)
cpuspeed=$(grep -m 1 'model name' /proc/cpuinfo | cut -d@ -f2)
ramsize=$(free -h | awk '/Mem:/ {print $2}')
diskinfo=$(lsblk -io KNAME,TYPE,SIZE,MODEL)
videocardinfo=$(lspci | grep -i "VGA compatible Controller")

#All hardware information varibles detailed above.

fqdninfo=$(hostname --fqdn)
hostaddress=$(hostname -I)
gatewayip=$(route -n | grep 'UG[ \t]' | awk '{print $2}')
dnsserverip=$(grep "^nameserver" /etc/resolv.conf | awk '{print $2}')
networkcard=$(lspci | grep -i Ethernet)
primaryint=$(ip r | grep '^default' | awk '{print $5}')
ipaddress=$(ip r | grep $primaryint | grep -v '^default' | awk '{print $1}')

#Network information contained in varibles above.

userslogged=$(users)
diskspace=$(df -k -l | awk 'NR>1 {printf "/%s %d\n", $NF, $4}')
processcount=$(ps -ef | grep -v grep | grep xyz | wc -l)
loadavg=$(cat /proc/loadavg)
memoryallo=$(free)
listeningports=$(sudo netstat -l)
ufwrules=$(sudo ufw status)

#System Status varibles are all listed above.

#Below all the varibles is the information that is displayed by the user who runs the script detailing the info of their own computer or VM.

echo "
System Report generated by $USER, $todaydate/$todaytime

System Information
------------------
Hostname: $hostname
OS: $distronameandversion
Uptime: $uptime"
echo "
Hardware Information
--------------------
cpu: $cpumakeandmodel
Speed: $cpuspeed
RAM: $ramsize
Disk(s): $diskinfo
Video: $videocardinfo"
echo "
Network Information
-------------------
FQDN: $fqdninfo
Host Address: $hostaddress
Gateway IP: $gatewayip
DNS Server: $dnsserverip

InterfaceName: $networkcard
IP Address: $ipaddress"
echo "
System Status
-------------
Users Logged In: $userslogged
Disk Space: $diskspace
Process Count: $processcount
Load Averages: $loadavg
Memory Allocation: $memoryallo
Listening Network Ports: $listeningports
UFW Rules: $ufwrules"
